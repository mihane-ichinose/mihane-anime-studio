<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, height=device-height, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no">
    <link rel="stylesheet" href="index.css">
    <link rel="stylesheet" href="owlcarousel/owl.carousel.min.css">
    <link rel="stylesheet" href="owlcarousel/owl.theme.default.min.css">
    <link rel="icon" href="images/icon.ico" type="image/x-icon">
    <link rel="shortcut icon" href="images/icon.ico" type="image/x-icon">
    <script src='https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js'></script>
    <script src="owlcarousel/owl.carousel.min.js"></script>
    <!--New feature sweetalert has been imported!-->
    <script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>
    <script src="index.js" type="text/javascript"></script>
    <script src="jquery-mousewheel-3.1.13/jquery.mousewheel.js"></script>
    <title>MAS - Mihane Anime Studio</title>
</head>
<body>



<div class="header">
   
         <div class="header_in">
               <div class="header_center">
                  <h1 class="logo"><img src="images/icon.ico" alt="Mihane Anime Studio" id="headerLogo" style="width:auto;height:78px;"></h1>             
                   <div id="header_pic_nav" class="hide_icon">

                        <div id="header_pic_menu tab" class="header_menu_ul ">
               <ul>
            <li class="menu-item menu on">
            
        
           <span> <div style="top: 0px;">开始页面</div><p>Home Page</p></span>
        
            </li>
            
             <li class="menu-item menu off">
            
    
           <span> <div style="top: 0px;">序号搜索</div><p>Search by Order</p></span>
            
            
            </li>
   
             <li class="menu-item menu off">
            
            
            <span><div style="top: 0px;">名称搜索</div><p>Search by Name</p></span>
            
            </li>
            
               <li class="menu-item menu off">
            
            
           <span> <div style="top: 0px;">番组大全</div><p>All Bangumi</p></span>
            
            </li>
            
              <li class="menu-item menu off">
           
         
         <span>   <div style="top: 0px;">更新日志</div><p>Update Log</p></span>
            </li>
            
          <li class="menu-item menu off">
            
    
           <span> <div style="top: 0px;">关于作者</div><p>About Author</p></span>
            
            </li>
            </ul>
               
                </div>

            </div>
            <h3>
            <!-- Show time -->
            <text id="time"></text>
        </h3>
        </div>    
        </div>
       </div>

    <div class="index" id="index">
    <div class="header-Empty"></div>
    <div class="main-Template">
        <br>
        <br>
        <h1>欢迎使用MAS在线查询系统！</h1>
        <br>
        

        <div id="main-tab">
            <!--<ul class="menu">
                <li class="menu on">开始页面</li>
                <li class="menu off">搜索序号</li>
                <li class="menu off">搜索名称</li>
                <li class="menu off">番组大全</li>
                <li class="menu off">更新日志</li>
            </ul> Depreciated menu-->

            <hr>
            <div id="main-Div" class="show">
                    <div class="container">
                        <table>
                            <thead>
                                <tr>
                                    <th colspan = "2">统计栏</th>                                                                 
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td id="menu0">正在获取电波...</td>
                                    <td id="menu1">&gt;_&lt;</td>
                                </tr>
                                <tr>
                                    <td id="menu2">正在获取电波...</td>
                                    <td id="menu3">&gt;_&lt;</td>
                                </tr>
                                <tr>
                                    <td id="menu4">正在获取电波...</td>
                                    <td id="menu5">&gt;_&lt;</td>
                                </tr>
                                <tr>
                                    <td id="menu6">正在获取电波...</td>
                                    <td id="menu7">&gt;_&lt;</td>
                                </tr>
                                <tr>
                                    <td id="menu8">正在获取电波...</td>
                                    <td id="menu9">&gt;_&lt;</td>
                                </tr>
                                <tr>
                                    <td id="menu10">正在获取电波...</td>
                                    <td id="menu11">&gt;_&lt;</td>
                                </tr>
                                <tr>
                                    <td id="menu12">正在获取电波...</td>
                                    <td id="menu13">&gt;_&lt;</td>
                                </tr>
                                <tr>
                                    <td>移动设备未正常跳转？&gt;&gt;</td>
                                    <td><a href="m.html"><image src="images/phone.png" style="width:auto;height:30px;"></a></td>
                                </tr>
                            </tbody>
                        </table>
                    </div>

                <!-- <iframe src="https://spreadsheets.google.com/tq?tqx=out:html&tq=select H, I limit 10 offset 6&key=1hpbzk9-0ZrkqUZsH6ANXo0os7-SLr4LjUewkXKjnY70&gid=1890606978"
                        here allowfullscreen sandbox="allow-scripts"></iframe> --><!-- iframe method is depreciated. -->
            </div>
            
            <div id="search-Div" class="hide">
                <form name="searchForm">
                    <br>
                    <h4 class="version">请输入要查找的番组序号：
                        <input id="searchID" oninput="if(value.length>4)value=value.slice(0,4)" type="number"
                               name="searchInput" value="">
                    </h4>
                </form>
                <br>
                <button class="search" id="searchIDButton" name="search"
                        onclick="queryName(searchForm.searchInput.value, 'A')">查找
                </button>
                <button class="clearButton" name="clear" onclick="clearInput()">清空</button>
                <br>
                <br>
                <div id="test" class="result">

                </div>
            </div>
            <div id="search-name-Div" class="hide">
                <form name="searchFormName">
                    <br>
                    <h4 class="version">请输入要查找的番组名称 - 中文：
                        <input id="searchName" type="text" name="searchInput" value="">
                    </h4>
                </form>
                <br>
                <button class="search" id="searchNameButton" name="search"
                        onclick="queryName(searchFormName.searchInput.value, 'B')">
                    查找
                </button>
                <button class="clearButton" name="clear" onclick="clearInput()">清空</button>
                <br>
                <br>
                <!--<div id="testName" class="result"></div>-->

                <div class="owl-carousel owl-theme" id="owl-box" style="display: none;">
                    <div class="item" id="o0"></div>
                    <div class="item" id="o1"></div>
                    <div class="item" id="o2"></div>
                    <div class="item" id="o3"></div>
                    <div class="item" id="o4"></div>
                    <div class="item" id="o5"></div>
                    <div class="item" id="o6"></div>
                    <div class="item" id="o7"></div>
                    <div class="item" id="o8"></div>
                    <div class="item" id="o9"></div>
                    <div class="item" id="o10"></div>
                    <div class="item" id="o11"></div>
                    <div class="item" id="o12"></div>
                    <div class="item" id="o13"></div>
                    <div class="item" id="o14"></div>
                    <!--支持到15个结果-->
                </div>
            </div>
            <div id="all-bangumi-Div" class="hide">
                <!-- <button class="search" onclick="ajaxSearch()">搜索</button> -->
                <form name="searchYearForm">
                    <br>
                <h4 class="version">番组年份：
                    <input id="searchYear" oninput="if(value.length>4)value=value.slice(0,4)" type="number" name="searchInput" value="">
                    </h4>
                    </form>
                    <br>
                    <ul class="season">
                    <li class="season off">冬</li>
                    <li class="season off">春</li>
                    <li class="season off">夏</li>
                    <li class="season off">秋</li>
                    <li class="season off">未定</li>
                    </ul>
                    <br>
                    <button class="search" id="searchYearButton" name="search"
                        onclick="queryName(searchYearForm.searchInput.value, 'F')">
                    筛选
                </button>
                <button class="clearButton" id="clearYearButton" name="clear" onclick="clearInput()">清空</button>
                <br>
                
                <br>
                <!-- <button class="clearButton" name="clear" onclick="clearInput()">清空</button>
                <br> -->
                <div id="test-all" class="result-all"></div>
            </div>
            <!--更新日志-->
            <div id="update-log-Div" class="hide">
                <p class="update-title">更新日志</p>
                <h4 class="version">V1.2.2</h4>
                <h4 class="version">修复了横排搜索结果的滑动bug，导入了jQuery Mousewheel库。</h4>
                <h4 class="version">修复了未定季度的番组会被统计入所有筛选结果的bug。</h4>
                <h4 class="version">新增未定季度分类筛选。</h4>
                <br/>
                <h4 class="version">V1.2.1</h4>
                <h4 class="version">新增移动版入口。</h4>
                <br/>
                <h4 class="version">V1.2.0</h4>
                <h4 class="version">取消了首页的iframe表格引用并改为使用jQuery获取数据，优化了表格样式。</h4>
                <br/>
                <h4 class="version">V1.1.0a</h4>
                <h4 class="version">简化了系统时钟显示。</h4>
                <br/>
                <h4 class="version">V1.1.0</h4>
                <h4 class="version">完成了“番组大全”的开发页面，支持年份、季度的筛选。</h4>
                <h4 class="version">优化界面显示效果。</h4>
                <br/>
                <h4 class="version">V1.0.5b</h4>
                <h4 class="version">去除原本顶部导航栏的引用其他链接图片的背景。改用半透明颜色填充。</h4>
                <h4 class="version">修复了因番组名以及OP、ED在含有特殊字符的情况下无法跳转链接的bug。使用了URL转码匹配。</h4>
                <br/>
                <h4 class="version">V1.0.5a</h4>
                <h4 class="version">新增加了对OP和ED在网易云音乐的搜索链入功能。</h4>
                <br/>
                <h4 class="version">V1.0.5</h4>
                <h4 class="version">更改原菜单至新导航栏。</h4>
                <h4 class="version">优化了界面颜色。</h4>
                <br/>
                <h4 class="version">V1.0.4</h4>
                <h4 class="version">改善了搜索结果的显示格式。</h4>
                <h4 class="version">创建了更新日志页面。</h4>
                <br/>
                <h4 class="version">V1.0.3及更早</h4>
                <h4 class="version">==</h4>
                <br/>
                <p class="update-title">待定事项</p>
                <h4 class="version">==暂无==</h4>
                <br/>
                <div class="wall">
                <image src="images/wall.jpg" class="wall">
                </div>
            </div>
            <div id="author-Div" class="hide">
            <p class="update-title">Mihane Ichinose</p>
            <p class="update-title"><a href="https://space.bilibili.com/5049780" target="_blank">Bilibili个人主页>>></a></p>
            </div>
        </div>
    </div>

    <div class="util">
        <img src="images/back_to_top.png" id="top" onclick="backToTop()" title="回顶部">
    </div>
    <div class="gradientback"></div>
    <div class="bottom-Template">
        <br>
        <p class="end">Copyright JST Auto 2019-2020.</p>
        <a id="srcPage"
           href="https://docs.google.com/spreadsheets/d/1hpbzk9-0ZrkqUZsH6ANXo0os7-SLr4LjUewkXKjnY70/edit?usp=sharing"
           target="_blank">Mihane Anime Studio - MAS</a>
        <p class="end">Version 1.2.2</p>
    </div>
</div>
<div class="toggle">
    <img src="images/hide.png" id="hide" onclick="hidePage()" title="隐藏页面">
    <img src="images/show.png" id="show" onclick="hidePage()" title="显示页面" style="display: none;">
</div>
<script>
    var spring = false,
    summer = false,
    autumn = false,
    winter = false;
    // function ajaxSearch() {
    //     swal({
    //         text: 'Search for a movie. e.g. "La La Land".',
    //         content: "input",
    //         button: {
    //             text: "Search!",
    //             closeModal: false,
    //         },
    //     })
    //         .then(name => {
    //             if (!name) throw null;
    //             return fetch('https://itunes.apple.com/search?term=${name}&entity=movie');
    //         })
    //         .then(results => {
    //             return results.json();
    //         })
    //         .then(json => {
    //             const movie = json.results[0];

    //             if (!movie) {
    //                 return swal("No movie was found!");
    //             }

    //             const name = movie.trackName;
    //             const imageURL = movie.artworkUrl100;

    //             swal({
    //                 title: "Top result:",
    //                 text: name,
    //                 icon: imageURL,
    //             });
    //         })
    //         .catch(err => {
    //             if (err) {
    //                 swal("Oh noes!", "The AJAX request failed!", "error");
    //             } else {
    //                 swal.stopLoading();
    //                 swal.close();
    //             }
    //         });
    // }

    function clearInput() {
        document.getElementById("searchID").value = "";
        document.getElementById("searchName").value = "";
        $("#test").html("");
        $("#test-all").html("");
        for (k = 0; k < 15; k++) {
            $("#o" + k).html("");
        }
        $("#owl-box").fadeOut(1000);
    }

    window.onload = function () {
        // // Execute a function when the user releases a key on the keyboard
        // inputID.addEventListener("keyup", function(event) {
        //     // Number 13 is the "Enter" key on the keyboard
        //     if (event.keyCode === 13) {
        //         // Cancel the default action, if needed
        //         event.preventDefault();
        //         // Trigger the button element with a click
        //         document.getElementById("searchIDButton").click();
        //     }
        // });
        //
        // inputName.addEventListener("keyup", function(event) {
        //     // Number 13 is the "Enter" key on the keyboard
        //     if (event.keyCode === 13) {
        //         // Cancel the default action, if needed
        //         event.preventDefault();
        //         // Trigger the button element with a click
        //         document.getElementById("searchNameButton").click();
        //     }
        // });
        // Bug needs to fix.

        startTime();

        $(document).ready(function () {
            $(".owl-carousel").owlCarousel({
                loop: false,
                center: true,
                margin: 50,
                nav: true,
                autoWidth: true,
                singleItem: true
            });
        });

        // Mousewheel Support For Owl Carousel.
        var owl = $('.owl-carousel');
        owl.on('mousewheel', '.owl-stage', function (e) {
            if (e.deltaY<0) {
                owl.trigger('next.owl');
            } else {
                owl.trigger('prev.owl');
            }
            e.preventDefault();
        });

        // JS实现选项卡切换
        // Season tab of page 'All bangumi'.
        var myTab2 = document.getElementById("all-bangumi-Div");    //整个div
        var myUl2 = myTab2.getElementsByTagName("ul")[0];//一个节点
        var myLi2 = myUl2.getElementsByTagName("li");    //数组 //.getElementsByTagName("div");
        var var_season = "";
        

        for (var i = 0; i < myLi2.length; i++) {
            myLi2[i].index = i;
            myLi2[i].onclick = function () {
                if (this.className == "season off"){
                    this.className = "season on";
                    switch(this) {
                        case myLi2[0]:
                            winter = true;
                            break;
                        case myLi2[1]:
                            spring = true;
                            break;
                        case myLi2[2]:
                            summer = true;
                            break;
                        case myLi2[3]:
                            autumn = true;
                            break;
                        case myLi2[4]:
                            unknown = true;
                            break;
                    }
                } else {
                    this.className = "season off";
                    switch(this) {
                        case myLi2[0]:
                            winter = false;
                            break;
                        case myLi2[1]:
                            spring = false;
                            break;
                        case myLi2[2]:
                            summer = false;
                            break;
                        case myLi2[3]:
                            autumn = false;
                            break;
                        case myLi2[4]:
                            unknown = false;
                            break;
                    }
                }
                
            }
        }

        // Main tab on the top.
        var myTab = document.getElementById("header_pic_menu tab");    //整个div
        var myUl = myTab.getElementsByTagName("ul")[0];//一个节点
        var myLi = myUl.getElementsByTagName("li");    //数组
        var myTab = document.getElementById("main-tab");
        var myDiv = $(myTab).children('div').get(); //.getElementsByTagName("div"); //数组

        for (var i = 0; i < myLi.length; i++) {
            myLi[i].index = i;
            myLi[i].onclick = function () {
                document.getElementById("searchYear").value = new Date().getFullYear();
                // Auto detect which season is it now.
                var month = new Date().getMonth() + 1;

                if (month >= 1 && month <= 3) {
                    for (var j = 0; j < myLi2.length; j++) {
                            myLi2[j].className = "season off";
                            winter = false;
                        }
                        myLi2[0].className = "season on";
                        winter = true;
                } else if (month >= 4 && month <= 6) {
                    for (var j = 0; j < myLi2.length; j++) {
                            myLi2[j].className = "season off";
                            spring = false;
                        }
                        myLi2[1].className = "season on";
                        spring = true;
                } else if (month >= 7 && month <= 9) {
                    for (var j = 0; j < myLi2.length; j++) {
                            myLi2[j].className = "season off";
                            summer = false;
                        }
                        myLi2[2].className = "season on";
                        summer = true;
                } else if (month >= 10 && month <= 12) {
                    for (var j = 0; j < myLi2.length; j++) {
                            myLi2[j].className = "season off";
                            autumn = false;
                        }
                        myLi2[3].className = "season on";
                        autumn = true;
                }
                myLi2[4].className = "season off";
                unknown = false;

                $("#test").html("");
                $("#test-all").html("");
                for (k = 0; k < 15; k++) {
                    $("#o" + k).html("");
                }
                $("#owl-box").hide();
                document.getElementById("searchID").value = "";
                document.getElementById("searchName").value = "";
                for (var j = 0; j < myLi.length; j++) {
                    myLi[j].className = "menu-item menu off";
                    myDiv[j].className = "hide";
                }
                this.className = "menu-item menu on";
                myDiv[this.index].className = "show";
            }
        }

        $.getScript("https://spreadsheets.google.com/tq?tqx=responseHandler:callback&tq=select H, I limit 7 offset 7&key=1hpbzk9-0ZrkqUZsH6ANXo0os7-SLr4LjUewkXKjnY70&gid=1890606978");

        window["callback"] = function (json) {

                    var rowArray = json.table.rows,
                        rowLength = rowArray.length,                
                        i;
                
                    for (i = 0; i < rowLength * 2; i+=2) {
                        dataGroup = rowArray[i/2].c;
                        dataLength = dataGroup.length;
                        title = dataGroup[0] != null ? (dataGroup[0].f || dataGroup[0].v) : "";
                        value = dataGroup[1] != null ? (dataGroup[1].f || dataGroup[1].v) : "";
                        $("#menu" + i).html(title);
                        $("#menu" + (i + 1)).html(value);
                    }
        }
        
    };

    window.onscroll = function () {
        scrollFunction()
    };

    function scrollFunction() {
        if (document.body.scrollTop > 20 || document.documentElement.scrollTop > 20) {
            $("#top").fadeIn(1000);
        } else {
            $("#top").fadeOut(400);
        }
    }

    function hidePage() {
        $(".header").fadeToggle(1000);
        $(".index").fadeToggle(1000);
        $(".toggle").find('img').toggle();
    }

    function queryName(input, column) {
        $("#owl-box").hide();
        (function query(window, $) {
            if (input === "") {
                swal({
                    title: "???",
                    text: "查找内容为空！请重新输入！",
                    icon: "warning",
                    button: "了解了"
                });
            } else {
                var sheetID = "1hpbzk9-0ZrkqUZsH6ANXo0os7-SLr4LjUewkXKjnY70", // 表格代号
                    gid = "0", // 工作表代号
                    // * = %2A
                    // = = %3D
                    sql, // SQL 语法
                    callback = "callback"; // 回呼函数名称
                    //list = ["", ". ", " (", "), 是", "星标", "年的番。"];

                var not_spring_text = "+and+G+%3C%3E+" + encodeURIComponent("'春'"),
                not_summer_text = "+and+G+%3C%3E+" + encodeURIComponent("'夏'"),
                not_autumn_text = "+and+G+%3C%3E+" + encodeURIComponent("'秋'"),
                not_winter_text = "+and+G+%3C%3E+" + encodeURIComponent("'冬'"),
                not_unknown_text = "+and+G+%3C%3E+" + encodeURIComponent("'未定'");

                //Query字符串要加引号
                if (column === 'A') {
                    sql = "select+%2A+where+" + column + "+%3D+" + encodeURIComponent(input);
                } else if (column === 'B') {
                    sql = "select+%2A+where+" + column + "+like+'%25" + encodeURIComponent(input) + "%25'";
                } else if (column === 'F') {
                    sql = "select+%2A+where+" + column + "+%3D+" + encodeURIComponent(input);
                }
                // else if (column === 'All') {
                //     sql = "select+%2A";
                // }
                // Caused too much lag to load up. Dipreciated.

                if(column === 'F') {
                    if(!spring) {
                        sql += not_spring_text;
                    }
                    if (!summer) {
                        sql += not_summer_text;
                    }
                    if (!autumn) {
                        sql += not_autumn_text;
                    }
                    if (!winter) {
                        sql += not_winter_text;
                    }
                    if (!unknown) {
                        sql += not_unknown_text;
                    }
                }

                

                $.getScript("https://spreadsheets.google.com/tq?tqx=responseHandler:" + callback + "&tq=" + sql + "&key=" + sheetID + "&gid=" + gid);
                //https://spreadsheets.google.com/tq?tqx=responseHandler:callback&tq=[sql]&key=1hpbzk9-0ZrkqUZsH6ANXo0os7-SLr4LjUewkXKjnY70&gid=0
                window[callback] = function (json) {
                    //$("#owl-box").empty();
                    // jQuery('<div/>', {
                    //     "class": 'owl-stage-outer'
                    // }).appendTo('#owl-box');
                    // jQuery('<div/>', {
                    //     "class": 'owl-nav'
                    // }).appendTo('#owl-box');
                    // jQuery('<button/>', {
                    //     "type": 'button',
                    //     "class": 'owl-prev',
                    //     "role": 'presentation'
                    // }).appendTo('.owl-nav');
                    // jQuery('<button/>', {
                    //     "type": 'button',
                    //     "class": 'owl-next',
                    //     "role": 'presentation'
                    // }).appendTo('.owl-nav');
                    // jQuery('<span/>', {
                    //     "aria-label": 'Previous'
                    // }).appendTo('.owl-prev');
                    // jQuery('<span/>', {
                    //     "aria-label": 'Next'
                    // }).appendTo('.owl-next');
                    // jQuery('<div/>', {
                    //     "class": 'owl-dots'
                    // }).appendTo('#owl-box');
                    // jQuery('<div/>', {
                    //     "class": 'owl-stage',
                    //     "style": 'transition: all 1.5s ease 0s; width: 7566px; transform: translate3d(134px, 0px, 0px);'
                    // }).appendTo('.owl-stage-outer');

                    for (k = 0; k < 15; k++) {
                        $("#o" + k).html("");
                        $("#o" + k).show();
                    }

                    var rowArray = json.table.rows,
                        rowLength = rowArray.length,
                        html = "", // Put these keys together using a string concatenation.
                        i, j, dataGroup, dataLength,
                        animeNum, animeNameCH, animeNameORI, animeStatus,
                        animeStar, animeYear, animeSeason, animeOP1, animeED1, animeOP1Raw, animeED1Raw,
                        animeOP2, animeED2, animeOP2Raw, animeED2Raw, // These are all keys from the table in MAS.
                        whole_html = "<br/>";

                    for (i = 0; i < rowLength; i++) {
                        dataGroup = rowArray[i].c;
                        dataLength = dataGroup.length;
                        animeNum = dataGroup[0] != null ? dataGroup[0].f || dataGroup[0].v : "";
                        animeNameCH = dataGroup[1] != null ? dataGroup[1].f || dataGroup[1].v : "待补全";
                        animeNameORI = dataGroup[2] != null ? dataGroup[2].f || dataGroup[2].v : "未知";
                        animeStatus = dataGroup[3] != null ? dataGroup[3].f || dataGroup[3].v : "未知";
                        animeStar = dataGroup[4] != null ? dataGroup[4].f || dataGroup[4].v : "";
                        if(animeStar == "☆") {
                            animeStarOutput = "加入了";
                        } else {
                            animeStarOutput = "并未加入";
                        }
                        animeYear = dataGroup[5] != null ? ((dataGroup[5].f || dataGroup[5].v) + "年") : "未知年份";
                        animeSeason = dataGroup[6] != null ? ((dataGroup[6].f || dataGroup[6].v) + "季") : "未知季度";
                        if (dataGroup[6].f || dataGroup[6].v === "未定") {
                            animeSeason = "未定";
                        }

                        animeOP1 = dataGroup[7] != null ? ("「" + (dataGroup[7].f || dataGroup[7].v) + "」") : "未知";                                   
                        animeED1 = dataGroup[9] != null ? ("「" + (dataGroup[9].f || dataGroup[9].v) + "」") : "未知";
                        animeOP2 = dataGroup[8] != null ? ("「" + (dataGroup[8].f || dataGroup[8].v) + "」") : "";
                        animeED2 = dataGroup[10] != null ? ("「" + (dataGroup[10].f || dataGroup[10].v) + "」") : "";

                        animeOP1 = animeOP1.replace(/#/g, ""); // Delete '#' after OP& EDs if there is any.
                        animeED1 = animeED1.replace(/#/g, "");
                        animeOP2 = animeOP2.replace(/#/g, "");
                        animeED2 = animeED2.replace(/#/g, "");

                        animeOP1Raw = encodeURIComponent(animeOP1.replace(/[「」]/g, "")); // The raw name of OP & ED that can be put into Netease music search page.
                        animeED1Raw = encodeURIComponent(animeED1.replace(/[「」]/g, ""));
                        animeOP2Raw = encodeURIComponent(animeOP2.replace(/[「」]/g, ""));
                        animeED2Raw = encodeURIComponent(animeED2.replace(/[「」]/g, ""));

                        if (animeOP1 != "未知") {
                            animeOP1 = "<a class='srcResLink' href='https://music.163.com/#/search/m/?s=" + animeOP1Raw + "&type=1' target='_blank'>" + animeOP1 + "</a>";
                        }
                        if (animeOP2 != "未知") {
                            animeOP2 = "<a class='srcResLink' href='https://music.163.com/#/search/m/?s=" + animeOP2Raw + "&type=1' target='_blank'>" + animeOP2 + "</a>";
                        }
                        if (animeED1 != "未知") {
                            animeED1 = "<a class='srcResLink' href='https://music.163.com/#/search/m/?s=" + animeED1Raw + "&type=1' target='_blank'>" + animeED1 + "</a>";
                        }
                        if (animeED2 != "未知") {
                            animeED2 = "<a class='srcResLink' href='https://music.163.com/#/search/m/?s=" + animeED2Raw + "&type=1' target='_blank'>" + animeED2 + "</a>";
                        }

                        html = "　　" + animeNum + ". " + "<a class='srcResLink' href='https://www.baidu.com/s?wd=" + encodeURIComponent(animeNameCH) + "' target='_blank'>" + animeNameCH + "</a>" + " (" + animeNameORI + ")，是" + animeYear + animeSeason + "番组。"
                        + "<br/>" + "　　" + animeStarOutput + "Mihane的个人推荐。"
                        + "<br/>" + "　　目前Mihane的观看状态是：" + animeStatus
                        + "<br/>" + "　　OP　" + animeOP1 + animeOP2
                        + "<br/>" + "　　ED　" + animeED1 + animeED2;
                        whole_html += html + '<br/><br/>';
                        // if (dataLength > 6) {
                        //     dataLength = 6;
                        // }
                        // for (j = 0; j < dataLength; j++) {
                        //     // 跳过一个项目，星标
                        //     if (j === 4 && dataGroup[5] != null) {
                        //         html += list[5];
                        //         html += (dataGroup[5].f || dataGroup[5].v || "") + " ";
                        //         html += "<br/>";
                        //     }
                        //     if (!dataGroup[j] || j === 4) {
                        //         continue;
                        //     }
                        //     html += list[j];
                        //     html += (dataGroup[j].f || dataGroup[j].v || "") + " ";
                            //html += "<br/>";
                        //}

                        // The old method has been depreciated.

                        // jQuery('<div/>', {
                        //     id: 'oi' + i,
                        //     "class": 'owl-item'
                        // }).appendTo('.owl-stage');
                        // jQuery('<div/>', {
                        //     id: 'o' + i,
                        //     "class": 'item'
                        // }).appendTo('#oi' + i);
                        // jQuery('<button/>', {
                        //     id: 'od' + i,
                        //     "role": 'button',
                        //     "class": 'owl-dot'
                        // }).appendTo('.owl-dots');
                        // jQuery('<span/>', {}).appendTo('#od' + i);
                        $("#o" + i).html(html);
                        $("#test-all").html(whole_html);
                        $("#owl-box").fadeIn(1000);
                        if (rowLength < 15) {
                            for (k = rowLength; k < 15; k++) {
                                $("#o" + k).hide();
                            }
                        }
                        if (column === 'B' && i !== rowLength - 1) {
                            html = "";
                        }
                    }

                    if (html === "") {
                        swal({
                            title: "emmm...",
                            text: "未搜索到结果！请重新输入！",
                            icon: "warning",
                            button: "了解了"
                        });
                    }
                    $("#test").html(html);
                    //$("#testName").html(html);
                };
            }
        })(window, jQuery);
    }
</script>
</body>
</html>